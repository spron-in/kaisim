# KAISim - Kubernetes AI Simulator

KAISim is an experimental project that simulates the Kubernetes API using Large Language Models (LLMs). It allows you to interact with a fake Kubernetes cluster using `kubectl` commands, providing realistic responses generated by AI.

Read more in [the blog](https://spron.in/blog/tpost/vin33mr671-simulating-kubernetes-api-with-ai-kaisim).

## Try it out

Visit [kais.im](https://kais.im) to try the live demo.

Just copy and run the kubectl command from the main page. 

## Features

* **Simulated Kubernetes API:** Generates responses to `kubectl` commands using LLMs.
* **Caching Mechanism:** Caches API "capability" responses to improve performance.
* **Custom Resource Definition (CRD) Support (Partial):** Allows uploading custom API resources.
* **Rate Limiting:** Protects the API from overload.

## Run your own installation

### Prerequisites

* PostgreSQL database - we use it for cached API responses and for future memory capability

### Deploy

1.  **Clone the repository:**
    ```bash
    git clone [https://github.com/spron-in/kaisim.git](https://www.google.com/search?q=https://github.com/spron-in/kaisim.git)
    cd kaisim
    ```
2.  **Set up your environment:** 
    ```bash
    python3 -m venv --clear --copies .venv
    source .venv/bin/activate
    pip install uv
    uv sync
    ```
3.  **Set up environment variables:**
    | Variable | Description | Default |
    |---|---|---|
    | `DATABASE_URL` | Full PostgreSQL URL | `None` |
    | `PGHOST` | PostgreSQL host | `127.0.0.1` |
    | `PGPORT` | PostgreSQL port | `5432` |
    | `PGUSER` | PostgreSQL user | `''` |
    | `PGPASSWORD` | PostgreSQL password | `''` |
    | `MODEL_NAME` | Large Language Model that will be used | `gemini/gemini-2.0-flash` |
    | `LLM_API_KEY` | An API key for your LLM provider (can be OpenAI, Google and other). See more in [llms.py](llms.py). | `None` |
    | `LLM_TEMPERATURE` | Model temperature | `0.5` |
    | `LOG_LEVEL` | Application logging level | `INFO` |
4.  **Run the application:** Launch the Flask API.
    ```bash
    python main.py
    ```
    Use Gunicorn or other tools for production deployments. 
6.  **Use `kubectl`:** Configure `kubectl` to point to your KAISim instance:
    ```bash
    kubectl --insecure-skip-tls-verify --token="YOUR_TOKEN" --server=YOUR_KAISIM_SERVER get pods
    ```
    * Replace `YOUR_TOKEN` and `YOUR_KAISIM_SERVER` with your values.

## Known Limitations and Potential improvements

* No memory: KAISim does not retain state between requests.
* Partial CRD support.
* `kubectl exec` is not supported.
* Rate limiting is in place.
* LLM Hallucinations can occur.

## Contributing

Contributions are welcome! Please feel free to submit pull requests or open issues.

## Author

Sergey Pronin

## License

[Apache 2.0](LICENSE)
